import React, { useEffect, useState } from 'react'
import sendData from '../util/sendData';
import { useNavigate } from 'react-router-dom';
import StripeDisplay from './StripeDisplay';

export default function Dashboard() {
    const navigate = useNavigate();

    const [info, setInfo] = useState(null);

    useEffect(() => {
        // Check auth
        const checkAuth = async () => {
            // for testing
            //setInfo(JSON.parse(`{"recentActivity":[{"_id":"6931bc887015db9b09496f71","userId":"690eaddde44f134e30e11257","type":"complete_workout","timestamp":"2025-12-04T16:53:28.894Z","people":["690295af9feed1676b9c407f","690eaddde44f134e30e11257"],"details":{"workout":{"workoutName":"New workout","time":1764867208885,"workoutLength":7292,"totalWeightLifted":0,"totalDistanceTraveled":0,"exercises":[{"id":"25","name":"Barbell Bent-Over Row","date":1764867208885,"sets":[{"uniqueId":"mirod8b2-geqs98w6","weight":"0","reps":"0","complete":true}],"shared":true,"tracks":["weight","reps"]}],"totalExpenditure":0,"fullWorkout":{"name":"New workout","exercises":[{"name":"Barbell Bent-Over Row","group":"back","tracks":["weight","reps"],"description":"The barbell bent-over row is a powerful compound movement that develops the lats, traps, and rhomboids, while engaging the lower back for stability.","image":462,"video":463,"muscleGroups":["back","biceps","lower back"],"difficulty":"intermediate","id":"25","met":6,"sets":[{"uniqueId":"mirod8b2-geqs98w6","weight":"0","reps":"0","complete":true}],"uniqueId":"mirod6zb-dq5yfr4l"},{"name":"Barbell Curl","group":"bicep","tracks":["weight","reps"],"description":"The barbell curl is a fundamental movement for bicep mass, allowing for heavier loads and symmetric development of both arms.","image":474,"video":475,"muscleGroups":["biceps"],"difficulty":"intermediate","id":"33","met":4,"sets":[],"uniqueId":"mirod6zb-kj3wwyp4"}],"startTime":1764867201593,"id":"mirod455-z1e53qsu"},"pastWorkoutsLength":4}},"__v":0,"peopleDetails":{"690eaddde44f134e30e11257":{"_id":"690eaddde44f134e30e11257","username":"test","usernameDecoration":{"prefix":"","prefixColor":"#000000","description":"Or description here"},"profileImg":{"url":"https://res.cloudinary.com/dxpmmy0ig/image/upload/v1765248986/profileImages/tpumbvjyhxxfhbnsn8jk.jpg","public_id":"profileImages/tpumbvjyhxxfhbnsn8jk"},"premium":true,"pastWorkoutsLength":4,"userId":"690eaddde44f134e30e11257"},"690295af9feed1676b9c407f":{"_id":"690295af9feed1676b9c407f","username":"DCmax1k","usernameDecoration":{"prefix":"LOCAL","prefixColor":"#ffe224"},"profileImg":{"url":"https://res.cloudinary.com/dlqj2rrlv/image/upload/v1741646278/profileImages/v2gdzso0hlhlpqpmcc48.jpg","public_id":""},"premium":true,"pastWorkoutsLength":10,"userId":"690295af9feed1676b9c407f"}}},{"_id":"6931bad9950990885a651af7","userId":"690eaddde44f134e30e11257","type":"complete_workout","timestamp":"2025-12-04T16:46:17.049Z","people":["690295af9feed1676b9c407f","690eaddde44f134e30e11257"],"details":{"workout":{"workoutName":"Workout 2","time":1764866776947,"workoutLength":15984,"totalWeightLifted":0,"totalDistanceTraveled":0,"exercises":[{"id":"25","name":"Barbell Bent-Over Row","date":1764866776947,"sets":[{"uniqueId":"miro3y17-ehfh58iq","weight":"0","reps":"0","complete":true}],"shared":true,"tracks":["weight","reps"]}],"totalExpenditure":0,"fullWorkout":{"name":"Workout 2","exercises":[{"name":"Barbell Bent-Over Row","group":"back","tracks":["weight","reps"],"description":"The barbell bent-over row is a powerful compound movement that develops the lats, traps, and rhomboids, while engaging the lower back for stability.","image":462,"video":463,"muscleGroups":["back","biceps","lower back"],"difficulty":"intermediate","id":"25","met":6,"sets":[{"uniqueId":"miro3y17-ehfh58iq","weight":"0","reps":"0","complete":true}],"uniqueId":"miro3r96-slg2slgh"},{"name":"Barbell Curl","group":"bicep","tracks":["weight","reps"],"description":"The barbell curl is a fundamental movement for bicep mass, allowing for heavier loads and symmetric development of both arms.","image":474,"video":475,"muscleGroups":["biceps"],"difficulty":"intermediate","id":"33","met":4,"sets":[],"uniqueId":"miro3r97-9t9ruxmm"},{"name":"Barbell Deadlift","group":"back","tracks":["weight","reps"],"description":"The barbell deadlift is a compound lift that targets the entire posterior chain, with a focus on the lower back, glutes, and hamstrings.","image":455,"video":456,"muscleGroups":["back","legs","glutes"],"difficulty":"advanced","id":"21","met":6,"sets":[],"uniqueId":"miro3r97-cjgec8mf"}],"startTime":1764866760963,"id":"miro3o5f-fz4j7o5f"},"pastWorkoutsLength":3}},"__v":0,"peopleDetails":{"690295af9feed1676b9c407f":{"_id":"690295af9feed1676b9c407f","username":"DCmax1k","usernameDecoration":{"prefix":"LOCAL","prefixColor":"#ffe224"},"profileImg":{"url":"https://res.cloudinary.com/dlqj2rrlv/image/upload/v1741646278/profileImages/v2gdzso0hlhlpqpmcc48.jpg","public_id":""},"premium":true,"pastWorkoutsLength":10,"userId":"690295af9feed1676b9c407f"},"690eaddde44f134e30e11257":{"_id":"690eaddde44f134e30e11257","username":"test","usernameDecoration":{"prefix":"","prefixColor":"#000000","description":"Or description here"},"profileImg":{"url":"https://res.cloudinary.com/dxpmmy0ig/image/upload/v1765248986/profileImages/tpumbvjyhxxfhbnsn8jk.jpg","public_id":"profileImages/tpumbvjyhxxfhbnsn8jk"},"premium":true,"pastWorkoutsLength":4,"userId":"690eaddde44f134e30e11257"}}},{"_id":"692f1450fbd93c411415ab88","userId":"690eaddde44f134e30e11257","type":"complete_workout","timestamp":"2025-12-02T16:31:12.452Z","people":["690295af9feed1676b9c407f","690eaddde44f134e30e11257"],"details":{"workout":{"workoutName":"New workout","time":1764693073375,"workoutLength":2750,"totalWeightLifted":0,"totalDistanceTraveled":0,"exercises":[{"id":"16","name":"Air Bike","date":1764693073375,"sets":[{"weight":"0","reps":"0","complete":true},{"weight":"0","reps":"0","complete":true},{"weight":"0","reps":"0","complete":true}],"shared":true,"tracks":["weight","reps"]}],"totalExpenditure":0,"fullWorkout":{"exercises":[{"name":"Air Bike","group":"abs","tracks":["weight","reps"],"description":"The air bike is a dynamic core exercise that targets both the upper and lower abs as well as the obliques through a twisting, pedaling motion.","image":470,"video":471,"muscleGroups":["abs","obliques"],"difficulty":"intermediate","id":"16","met":4.5,"sets":[{"weight":"0","reps":"0","complete":true},{"weight":"0","reps":"0","complete":true},{"weight":"0","reps":"0","complete":true}],"uniqueId":"miosdy1t-4jjysf86"},{"name":"Barbell Bench Press","group":"chest","tracks":["weight","reps"],"description":"The barbell bench press is a fundamental exercise for building upper body strength, specifically targeting the pectoral muscles, triceps, and shoulders.","image":453,"video":454,"muscleGroups":["chest","shoulders","triceps"],"difficulty":"intermediate","id":"1","met":6,"sets":[],"uniqueId":"miosdy1t-06ex6y6t"},{"name":"Barbell Deadlift","group":"back","tracks":["weight","reps"],"description":"The barbell deadlift is a compound lift that targets the entire posterior chain, with a focus on the lower back, glutes, and hamstrings.","image":479,"video":480,"muscleGroups":["back","glutes","hamstrings"],"difficulty":"advanced","id":"21","met":6,"sets":[],"uniqueId":"miosdy1t-djs4qoxm"}],"id":"miosdv81-zjrkmhei","name":"New workout","startTime":1764693070625},"pastWorkoutsLength":2}},"__v":0,"peopleDetails":{"690295af9feed1676b9c407f":{"_id":"690295af9feed1676b9c407f","username":"DCmax1k","usernameDecoration":{"prefix":"LOCAL","prefixColor":"#ffe224"},"profileImg":{"url":"https://res.cloudinary.com/dlqj2rrlv/image/upload/v1741646278/profileImages/v2gdzso0hlhlpqpmcc48.jpg","public_id":""},"premium":true,"pastWorkoutsLength":10,"userId":"690295af9feed1676b9c407f"},"690eaddde44f134e30e11257":{"_id":"690eaddde44f134e30e11257","username":"test","usernameDecoration":{"prefix":"","prefixColor":"#000000","description":"Or description here"},"profileImg":{"url":"https://res.cloudinary.com/dxpmmy0ig/image/upload/v1765248986/profileImages/tpumbvjyhxxfhbnsn8jk.jpg","public_id":"profileImages/tpumbvjyhxxfhbnsn8jk"},"premium":true,"pastWorkoutsLength":4,"userId":"690eaddde44f134e30e11257"}}},{"_id":"692f1267e6afb0b239602191","userId":"690eaddde44f134e30e11257","type":"complete_workout","timestamp":"2025-12-02T16:23:03.348Z","people":["690295af9feed1676b9c407f","690eaddde44f134e30e11257"],"details":{"workout":{"workoutName":"New workout","time":1764692584250,"workoutLength":17000,"totalWeightLifted":0,"totalDistanceTraveled":0,"exercises":[{"id":"16","name":"Air Bike","date":1764692584250,"sets":[{"weight":"0","reps":"0","complete":true},{"weight":"0","reps":"0","complete":true},{"weight":"0","reps":"0","complete":true}],"shared":true,"tracks":["weight","reps"]}],"totalExpenditure":0,"fullWorkout":{"exercises":[{"name":"Air Bike","group":"abs","tracks":["weight","reps"],"description":"The air bike is a dynamic core exercise that targets both the upper and lower abs as well as the obliques through a twisting, pedaling motion.","image":470,"video":471,"muscleGroups":["abs","obliques"],"difficulty":"intermediate","id":"16","met":4.5,"sets":[{"weight":"0","reps":"0","complete":true},{"weight":"0","reps":"0","complete":true},{"weight":"0","reps":"0","complete":true}],"uniqueId":"miosdy1t-4jjysf86"},{"name":"Barbell Bench Press","group":"chest","tracks":["weight","reps"],"description":"The barbell bench press is a fundamental exercise for building upper body strength, specifically targeting the pectoral muscles, triceps, and shoulders.","image":453,"video":454,"muscleGroups":["chest","shoulders","triceps"],"difficulty":"intermediate","id":"1","met":6,"sets":[],"uniqueId":"miosdy1t-06ex6y6t"},{"name":"Barbell Deadlift","group":"back","tracks":["weight","reps"],"description":"The barbell deadlift is a compound lift that targets the entire posterior chain, with a focus on the lower back, glutes, and hamstrings.","image":479,"video":480,"muscleGroups":["back","glutes","hamstrings"],"difficulty":"advanced","id":"21","met":6,"sets":[],"uniqueId":"miosdy1t-djs4qoxm"}],"id":"miosdv81-zjrkmhei","name":"New workout","startTime":1764692567250},"pastWorkoutsLength":1}},"__v":0,"peopleDetails":{"690295af9feed1676b9c407f":{"_id":"690295af9feed1676b9c407f","username":"DCmax1k","usernameDecoration":{"prefix":"LOCAL","prefixColor":"#ffe224"},"profileImg":{"url":"https://res.cloudinary.com/dlqj2rrlv/image/upload/v1741646278/profileImages/v2gdzso0hlhlpqpmcc48.jpg","public_id":""},"premium":true,"pastWorkoutsLength":10,"userId":"690295af9feed1676b9c407f"},"690eaddde44f134e30e11257":{"_id":"690eaddde44f134e30e11257","username":"test","usernameDecoration":{"prefix":"","prefixColor":"#000000","description":"Or description here"},"profileImg":{"url":"https://res.cloudinary.com/dxpmmy0ig/image/upload/v1765248986/profileImages/tpumbvjyhxxfhbnsn8jk.jpg","public_id":"profileImages/tpumbvjyhxxfhbnsn8jk"},"premium":true,"pastWorkoutsLength":4,"userId":"690eaddde44f134e30e11257"}}},{"_id":"69113e393d09557ac91c34f7","userId":"690eaddde44f134e30e11257","type":"complete_workout","timestamp":"2025-11-10T01:22:01.413Z","people":["690295af9feed1676b9c407f","690eaddde44f134e30e11257"],"details":{"workout":{"workoutName":"Legs and Shoulder","time":1762737718914,"workoutLength":3318,"totalWeightLifted":4050,"totalDistanceTraveled":0,"exercises":[{"id":"58","name":"Barbell Squat","date":1762737718914,"sets":[{"weight":"135","reps":"10","complete":true},{"weight":"135","reps":"10","complete":true},{"weight":"135","reps":"10","complete":true}],"shared":true,"tracks":["weight","reps"]}],"totalExpenditure":10.001703599999999,"fullWorkout":{"exercises":[{"name":"Barbell Squat","group":"leg","tracks":["weight","reps"],"description":"The barbell squat is a foundational compound lift that targets the quadriceps, hamstrings, glutes, and core for overall lower-body strength.","image":526,"video":527,"muscleGroups":["quadriceps","hamstrings","glutes"],"difficulty":"intermediate","id":"58","met":6,"sets":[{"weight":"135","reps":"10","complete":true},{"weight":"135","reps":"10","complete":true},{"weight":"135","reps":"10","complete":true}],"uniqueId":"mhpor4j0-jdl1xrh9"},{"name":"Dumbbell Squat","group":"leg","tracks":["weight","reps"],"description":"The dumbbell squat builds lower body strength and stability, focusing on the quads, glutes, and hamstrings with added mobility.","muscleGroups":["quadriceps","hamstrings","glutes"],"difficulty":"beginner","id":"59","met":5.5,"sets":[{"weight":"135","reps":"10"},{"weight":"135","reps":"10"},{"weight":"135","reps":"10"}],"uniqueId":"mhpor4j0-169gtdtv"},{"name":"Machine Leg Extensions","group":"leg","tracks":["weight","reps"],"description":"Machine leg extensions isolate the quadriceps, allowing for focused development of the front thigh muscles.","image":528,"video":529,"muscleGroups":["quadriceps"],"difficulty":"beginner","id":"60","met":3.5,"sets":[],"uniqueId":"mhpor4j0-85jw0ghv"},{"name":"Dumbbell Shoulder Shrug","group":"back","tracks":["weight","reps"],"description":"The dumbbell shoulder shrug isolates the trapezius muscles, enhancing upper back mass and neck strength.","image":490,"video":491,"muscleGroups":["traps"],"difficulty":"beginner","id":"28","met":4.5,"sets":[],"uniqueId":"mhpor4j0-gnjttkjg"},{"name":"Push-Up","group":"chest","tracks":["weight","reps"],"description":"The push-up is a bodyweight exercise that targets the chest, shoulders, and triceps, and can be performed anywhere without equipment.","image":465,"muscleGroups":["chest","shoulders","triceps"],"difficulty":"beginner","id":"11","met":6,"sets":[],"uniqueId":"mhpor4j0-cip6c0vo"},{"name":"Machine Bench Press","group":"chest","tracks":["weight","reps"],"description":"The machine bench press is a beginner-friendly exercise that allows for controlled chest development with reduced risk of injury due to its guided motion.","image":459,"video":460,"muscleGroups":["chest","shoulders","triceps"],"difficulty":"beginner","id":"7","met":5,"sets":[],"uniqueId":"mhpor4j0-q8uhjbqx"}],"id":"mhpoqo1t-78b2wwqe","name":"Legs and Shoulder","startTime":1762737715596},"pastWorkoutsLength":5}},"__v":0,"reactions":{"wink":[],"gem":[],"demon":[],"eyes":["690eaddde44f134e30e11257"],"fire":[],"beer":[],"nophone":["690295af9feed1676b9c407f"]},"peopleDetails":{"690eaddde44f134e30e11257":{"_id":"690eaddde44f134e30e11257","username":"test","usernameDecoration":{"prefix":"","prefixColor":"#000000","description":"Or description here"},"profileImg":{"url":"https://res.cloudinary.com/dxpmmy0ig/image/upload/v1765248986/profileImages/tpumbvjyhxxfhbnsn8jk.jpg","public_id":"profileImages/tpumbvjyhxxfhbnsn8jk"},"premium":true,"pastWorkoutsLength":4,"userId":"690eaddde44f134e30e11257"},"690295af9feed1676b9c407f":{"_id":"690295af9feed1676b9c407f","username":"DCmax1k","usernameDecoration":{"prefix":"LOCAL","prefixColor":"#ffe224"},"profileImg":{"url":"https://res.cloudinary.com/dlqj2rrlv/image/upload/v1741646278/profileImages/v2gdzso0hlhlpqpmcc48.jpg","public_id":""},"premium":true,"pastWorkoutsLength":10,"userId":"690295af9feed1676b9c407f"}}},{"_id":"69113e243d09557ac91c34bb","userId":"690295af9feed1676b9c407f","type":"complete_workout","timestamp":"2025-11-10T01:21:40.022Z","people":["690eaddde44f134e30e11257","690295af9feed1676b9c407f"],"details":{"workout":{"workoutName":"Legs - Edge Gym","time":1762737699610,"workoutLength":3568,"totalWeightLifted":4350,"totalDistanceTraveled":0,"exercises":[{"id":"61","name":"Machine Leg Press","date":1762737699610,"sets":[{"weight":"145","reps":"10","complete":true},{"weight":"145","reps":"10","complete":true},{"weight":"145","reps":"10","complete":true}],"shared":true,"tracks":["weight","reps"]}],"totalExpenditure":8.75149065,"fullWorkout":{"exercises":[{"name":"Machine Leg Press","group":"leg","tracks":["weight","reps"],"description":"The machine leg press builds leg strength by targeting the quads, glutes, and hamstrings through a supported pressing motion.","muscleGroups":["quadriceps","glutes","hamstrings"],"difficulty":"beginner","id":"61","met":5,"sets":[{"weight":"145","reps":"10","complete":true},{"weight":"145","reps":"10","complete":true},{"weight":"145","reps":"10","complete":true}],"uniqueId":"mhjl8fu6-f7zgwdhb"},{"name":"Dumbbell Lunge","group":"leg","tracks":["weight","reps"],"description":"The dumbbell lunge develops balance, coordination, and lower body strength by working the quads, hamstrings, and glutes.","image":532,"video":533,"muscleGroups":["quadriceps","glutes","hamstrings"],"difficulty":"intermediate","id":"65","met":5.5,"sets":[{"weight":"25","reps":"10"},{"weight":"25","reps":"10"},{"weight":"25","reps":"10"}],"uniqueId":"mhjlm226-88nc5ut5"},{"name":"Machine Leg Extensions","group":"leg","tracks":["weight","reps"],"description":"Machine leg extensions isolate the quadriceps, allowing for focused development of the front thigh muscles.","image":528,"video":529,"muscleGroups":["quadriceps"],"difficulty":"beginner","id":"60","met":3.5,"sets":[{"weight":"55","reps":"10"},{"weight":"55","reps":"10"},{"weight":"55","reps":"10"}],"uniqueId":"mhjm7och-agfmgvwm"}],"id":"mhjkz6lj-uwviroct","name":"Legs - Edge Gym","startTime":1762737696042},"pastWorkoutsLength":19}},"__v":0,"reactions":{"hundred":["690295af9feed1676b9c407f","690eaddde44f134e30e11257"]},"peopleDetails":{"690eaddde44f134e30e11257":{"_id":"690eaddde44f134e30e11257","username":"test","usernameDecoration":{"prefix":"","prefixColor":"#000000","description":"Or description here"},"profileImg":{"url":"https://res.cloudinary.com/dxpmmy0ig/image/upload/v1765248986/profileImages/tpumbvjyhxxfhbnsn8jk.jpg","public_id":"profileImages/tpumbvjyhxxfhbnsn8jk"},"premium":true,"pastWorkoutsLength":4,"userId":"690eaddde44f134e30e11257"},"690295af9feed1676b9c407f":{"_id":"690295af9feed1676b9c407f","username":"DCmax1k","usernameDecoration":{"prefix":"LOCAL","prefixColor":"#ffe224"},"profileImg":{"url":"https://res.cloudinary.com/dlqj2rrlv/image/upload/v1741646278/profileImages/v2gdzso0hlhlpqpmcc48.jpg","public_id":""},"premium":true,"pastWorkoutsLength":10,"userId":"690295af9feed1676b9c407f"}}},{"_id":"69113d9ae24d9e90b0b0f10a","userId":"690eaddde44f134e30e11257","type":"complete_workout","timestamp":"2025-11-10T01:19:22.444Z","people":["690295af9feed1676b9c407f","690eaddde44f134e30e11257"],"details":{"workout":{"workoutName":"Legs and Shoulder","time":1762737559947,"workoutLength":5284,"totalWeightLifted":4050,"totalDistanceTraveled":0,"exercises":[{"id":"58","name":"Barbell Squat","date":1762737559947,"sets":[{"weight":"135","reps":"10","complete":true},{"weight":"135","reps":"10","complete":true},{"weight":"135","reps":"10","complete":true}],"shared":true,"tracks":["weight","reps"]}],"totalExpenditure":10.001703599999999,"fullWorkout":{"exercises":[{"name":"Barbell Squat","group":"leg","tracks":["weight","reps"],"description":"The barbell squat is a foundational compound lift that targets the quadriceps, hamstrings, glutes, and core for overall lower-body strength.","image":526,"video":527,"muscleGroups":["quadriceps","hamstrings","glutes"],"difficulty":"intermediate","id":"58","met":6,"sets":[{"weight":"135","reps":"10","complete":true},{"weight":"135","reps":"10","complete":true},{"weight":"135","reps":"10","complete":true}],"uniqueId":"mhpor4j0-jdl1xrh9"},{"name":"Dumbbell Squat","group":"leg","tracks":["weight","reps"],"description":"The dumbbell squat builds lower body strength and stability, focusing on the quads, glutes, and hamstrings with added mobility.","muscleGroups":["quadriceps","hamstrings","glutes"],"difficulty":"beginner","id":"59","met":5.5,"sets":[{"weight":"135","reps":"10"},{"weight":"135","reps":"10"},{"weight":"135","reps":"10"}],"uniqueId":"mhpor4j0-169gtdtv"},{"name":"Machine Leg Extensions","group":"leg","tracks":["weight","reps"],"description":"Machine leg extensions isolate the quadriceps, allowing for focused development of the front thigh muscles.","image":528,"video":529,"muscleGroups":["quadriceps"],"difficulty":"beginner","id":"60","met":3.5,"sets":[],"uniqueId":"mhpor4j0-85jw0ghv"},{"name":"Dumbbell Shoulder Shrug","group":"back","tracks":["weight","reps"],"description":"The dumbbell shoulder shrug isolates the trapezius muscles, enhancing upper back mass and neck strength.","image":490,"video":491,"muscleGroups":["traps"],"difficulty":"beginner","id":"28","met":4.5,"sets":[],"uniqueId":"mhpor4j0-gnjttkjg"},{"name":"Push-Up","group":"chest","tracks":["weight","reps"],"description":"The push-up is a bodyweight exercise that targets the chest, shoulders, and triceps, and can be performed anywhere without equipment.","image":465,"muscleGroups":["chest","shoulders","triceps"],"difficulty":"beginner","id":"11","met":6,"sets":[],"uniqueId":"mhpor4j0-cip6c0vo"},{"name":"Machine Bench Press","group":"chest","tracks":["weight","reps"],"description":"The machine bench press is a beginner-friendly exercise that allows for controlled chest development with reduced risk of injury due to its guided motion.","image":459,"video":460,"muscleGroups":["chest","shoulders","triceps"],"difficulty":"beginner","id":"7","met":5,"sets":[],"uniqueId":"mhpor4j0-q8uhjbqx"}],"id":"mhpoqo1t-78b2wwqe","name":"Legs and Shoulder","startTime":1762737554663},"pastWorkoutsLength":4}},"__v":0,"peopleDetails":{"690295af9feed1676b9c407f":{"_id":"690295af9feed1676b9c407f","username":"DCmax1k","usernameDecoration":{"prefix":"LOCAL","prefixColor":"#ffe224"},"profileImg":{"url":"https://res.cloudinary.com/dlqj2rrlv/image/upload/v1741646278/profileImages/v2gdzso0hlhlpqpmcc48.jpg","public_id":""},"premium":true,"pastWorkoutsLength":10,"userId":"690295af9feed1676b9c407f"},"690eaddde44f134e30e11257":{"_id":"690eaddde44f134e30e11257","username":"test","usernameDecoration":{"prefix":"","prefixColor":"#000000","description":"Or description here"},"profileImg":{"url":"https://res.cloudinary.com/dxpmmy0ig/image/upload/v1765248986/profileImages/tpumbvjyhxxfhbnsn8jk.jpg","public_id":"profileImages/tpumbvjyhxxfhbnsn8jk"},"premium":true,"pastWorkoutsLength":4,"userId":"690eaddde44f134e30e11257"}}},{"_id":"69113cd4c6ba5bc5d411136b","userId":"690295af9feed1676b9c407f","type":"complete_workout","timestamp":"2025-11-10T01:16:04.923Z","people":["690eaddde44f134e30e11257","690295af9feed1676b9c407f"],"details":{"workout":{"workoutName":"Legs - Edge Gym","time":1762737364504,"workoutLength":2567,"totalWeightLifted":4350,"totalDistanceTraveled":0,"exercises":[{"id":"61","name":"Machine Leg Press","date":1762737364504,"sets":[{"weight":"145","reps":"10","complete":true},{"weight":"145","reps":"10","complete":true},{"weight":"145","reps":"10","complete":true}],"shared":true,"tracks":["weight","reps"]}],"totalExpenditure":8.75149065,"fullWorkout":{"exercises":[{"name":"Machine Leg Press","group":"leg","tracks":["weight","reps"],"description":"The machine leg press builds leg strength by targeting the quads, glutes, and hamstrings through a supported pressing motion.","muscleGroups":["quadriceps","glutes","hamstrings"],"difficulty":"beginner","id":"61","met":5,"sets":[{"weight":"145","reps":"10","complete":true},{"weight":"145","reps":"10","complete":true},{"weight":"145","reps":"10","complete":true}],"uniqueId":"mhjl8fu6-f7zgwdhb"},{"name":"Dumbbell Lunge","group":"leg","tracks":["weight","reps"],"description":"The dumbbell lunge develops balance, coordination, and lower body strength by working the quads, hamstrings, and glutes.","image":532,"video":533,"muscleGroups":["quadriceps","glutes","hamstrings"],"difficulty":"intermediate","id":"65","met":5.5,"sets":[{"weight":"25","reps":"10"},{"weight":"25","reps":"10"},{"weight":"25","reps":"10"}],"uniqueId":"mhjlm226-88nc5ut5"},{"name":"Machine Leg Extensions","group":"leg","tracks":["weight","reps"],"description":"Machine leg extensions isolate the quadriceps, allowing for focused development of the front thigh muscles.","image":528,"video":529,"muscleGroups":["quadriceps"],"difficulty":"beginner","id":"60","met":3.5,"sets":[{"weight":"55","reps":"10"},{"weight":"55","reps":"10"},{"weight":"55","reps":"10"}],"uniqueId":"mhjm7och-agfmgvwm"}],"id":"mhjkz6lj-uwviroct","name":"Legs - Edge Gym","startTime":1762737361937},"pastWorkoutsLength":18}},"__v":0,"peopleDetails":{"690eaddde44f134e30e11257":{"_id":"690eaddde44f134e30e11257","username":"test","usernameDecoration":{"prefix":"","prefixColor":"#000000","description":"Or description here"},"profileImg":{"url":"https://res.cloudinary.com/dxpmmy0ig/image/upload/v1765248986/profileImages/tpumbvjyhxxfhbnsn8jk.jpg","public_id":"profileImages/tpumbvjyhxxfhbnsn8jk"},"premium":true,"pastWorkoutsLength":4,"userId":"690eaddde44f134e30e11257"},"690295af9feed1676b9c407f":{"_id":"690295af9feed1676b9c407f","username":"DCmax1k","usernameDecoration":{"prefix":"LOCAL","prefixColor":"#ffe224"},"profileImg":{"url":"https://res.cloudinary.com/dlqj2rrlv/image/upload/v1741646278/profileImages/v2gdzso0hlhlpqpmcc48.jpg","public_id":""},"premium":true,"pastWorkoutsLength":10,"userId":"690295af9feed1676b9c407f"}}},{"_id":"69113c971ab5ebcba7c173bc","userId":"690eaddde44f134e30e11257","type":"complete_workout","timestamp":"2025-11-10T01:15:03.182Z","people":["690295af9feed1676b9c407f","690eaddde44f134e30e11257"],"details":{"workout":{"workoutName":"Legs and Shoulder","time":1762737300547,"workoutLength":4715,"totalWeightLifted":4050,"totalDistanceTraveled":0,"exercises":[{"id":"58","name":"Barbell Squat","date":1762737300547,"sets":[{"weight":"135","reps":"10","complete":true},{"weight":"135","reps":"10","complete":true},{"weight":"135","reps":"10","complete":true}],"shared":true,"tracks":["weight","reps"]}],"totalExpenditure":10.001703599999999,"fullWorkout":{"exercises":[{"name":"Barbell Squat","group":"leg","tracks":["weight","reps"],"description":"The barbell squat is a foundational compound lift that targets the quadriceps, hamstrings, glutes, and core for overall lower-body strength.","image":526,"video":527,"muscleGroups":["quadriceps","hamstrings","glutes"],"difficulty":"intermediate","id":"58","met":6,"sets":[{"weight":"135","reps":"10","complete":true},{"weight":"135","reps":"10","complete":true},{"weight":"135","reps":"10","complete":true}],"uniqueId":"mhpor4j0-jdl1xrh9"},{"name":"Dumbbell Squat","group":"leg","tracks":["weight","reps"],"description":"The dumbbell squat builds lower body strength and stability, focusing on the quads, glutes, and hamstrings with added mobility.","muscleGroups":["quadriceps","hamstrings","glutes"],"difficulty":"beginner","id":"59","met":5.5,"sets":[{"weight":"135","reps":"10"},{"weight":"135","reps":"10"},{"weight":"135","reps":"10"}],"uniqueId":"mhpor4j0-169gtdtv"},{"name":"Machine Leg Extensions","group":"leg","tracks":["weight","reps"],"description":"Machine leg extensions isolate the quadriceps, allowing for focused development of the front thigh muscles.","image":528,"video":529,"muscleGroups":["quadriceps"],"difficulty":"beginner","id":"60","met":3.5,"sets":[],"uniqueId":"mhpor4j0-85jw0ghv"},{"name":"Dumbbell Shoulder Shrug","group":"back","tracks":["weight","reps"],"description":"The dumbbell shoulder shrug isolates the trapezius muscles, enhancing upper back mass and neck strength.","image":490,"video":491,"muscleGroups":["traps"],"difficulty":"beginner","id":"28","met":4.5,"sets":[],"uniqueId":"mhpor4j0-gnjttkjg"},{"name":"Push-Up","group":"chest","tracks":["weight","reps"],"description":"The push-up is a bodyweight exercise that targets the chest, shoulders, and triceps, and can be performed anywhere without equipment.","image":465,"muscleGroups":["chest","shoulders","triceps"],"difficulty":"beginner","id":"11","met":6,"sets":[],"uniqueId":"mhpor4j0-cip6c0vo"},{"name":"Machine Bench Press","group":"chest","tracks":["weight","reps"],"description":"The machine bench press is a beginner-friendly exercise that allows for controlled chest development with reduced risk of injury due to its guided motion.","image":459,"video":460,"muscleGroups":["chest","shoulders","triceps"],"difficulty":"beginner","id":"7","met":5,"sets":[],"uniqueId":"mhpor4j0-q8uhjbqx"}],"id":"mhpoqo1t-78b2wwqe","name":"Legs and Shoulder","startTime":1762737295832},"pastWorkoutsLength":3}},"__v":0,"peopleDetails":{"690295af9feed1676b9c407f":{"_id":"690295af9feed1676b9c407f","username":"DCmax1k","usernameDecoration":{"prefix":"LOCAL","prefixColor":"#ffe224"},"profileImg":{"url":"https://res.cloudinary.com/dlqj2rrlv/image/upload/v1741646278/profileImages/v2gdzso0hlhlpqpmcc48.jpg","public_id":""},"premium":true,"pastWorkoutsLength":10,"userId":"690295af9feed1676b9c407f"},"690eaddde44f134e30e11257":{"_id":"690eaddde44f134e30e11257","username":"test","usernameDecoration":{"prefix":"","prefixColor":"#000000","description":"Or description here"},"profileImg":{"url":"https://res.cloudinary.com/dxpmmy0ig/image/upload/v1765248986/profileImages/tpumbvjyhxxfhbnsn8jk.jpg","public_id":"profileImages/tpumbvjyhxxfhbnsn8jk"},"premium":true,"pastWorkoutsLength":4,"userId":"690eaddde44f134e30e11257"}}},{"_id":"69113bcb1ab5ebcba7c173b7","userId":"690295af9feed1676b9c407f","type":"complete_workout","timestamp":"2025-11-10T01:11:39.694Z","people":["690eaddde44f134e30e11257","690295af9feed1676b9c407f"],"details":{"workout":{"workoutName":"Legs - Edge Gym","time":1762737099270,"workoutLength":3632,"totalWeightLifted":4350,"totalDistanceTraveled":0,"exercises":[{"id":"61","name":"Machine Leg Press","date":1762737099270,"sets":[{"weight":"145","reps":"10","complete":true},{"weight":"145","reps":"10","complete":true},{"weight":"145","reps":"10","complete":true}],"shared":true,"tracks":["weight","reps"]}],"totalExpenditure":8.75149065,"fullWorkout":{"exercises":[{"name":"Machine Leg Press","group":"leg","tracks":["weight","reps"],"description":"The machine leg press builds leg strength by targeting the quads, glutes, and hamstrings through a supported pressing motion.","muscleGroups":["quadriceps","glutes","hamstrings"],"difficulty":"beginner","id":"61","met":5,"sets":[{"weight":"145","reps":"10","complete":true},{"weight":"145","reps":"10","complete":true},{"weight":"145","reps":"10","complete":true}],"uniqueId":"mhjl8fu6-f7zgwdhb"},{"name":"Dumbbell Lunge","group":"leg","tracks":["weight","reps"],"description":"The dumbbell lunge develops balance, coordination, and lower body strength by working the quads, hamstrings, and glutes.","image":532,"video":533,"muscleGroups":["quadriceps","glutes","hamstrings"],"difficulty":"intermediate","id":"65","met":5.5,"sets":[{"weight":"25","reps":"10"},{"weight":"25","reps":"10"},{"weight":"25","reps":"10"}],"uniqueId":"mhjlm226-88nc5ut5"},{"name":"Machine Leg Extensions","group":"leg","tracks":["weight","reps"],"description":"Machine leg extensions isolate the quadriceps, allowing for focused development of the front thigh muscles.","image":528,"video":529,"muscleGroups":["quadriceps"],"difficulty":"beginner","id":"60","met":3.5,"sets":[{"weight":"55","reps":"10"},{"weight":"55","reps":"10"},{"weight":"55","reps":"10"}],"uniqueId":"mhjm7och-agfmgvwm"}],"id":"mhjkz6lj-uwviroct","name":"Legs - Edge Gym","startTime":1762737095638},"pastWorkoutsLength":17}},"__v":0,"peopleDetails":{"690eaddde44f134e30e11257":{"_id":"690eaddde44f134e30e11257","username":"test","usernameDecoration":{"prefix":"","prefixColor":"#000000","description":"Or description here"},"profileImg":{"url":"https://res.cloudinary.com/dxpmmy0ig/image/upload/v1765248986/profileImages/tpumbvjyhxxfhbnsn8jk.jpg","public_id":"profileImages/tpumbvjyhxxfhbnsn8jk"},"premium":true,"pastWorkoutsLength":4,"userId":"690eaddde44f134e30e11257"},"690295af9feed1676b9c407f":{"_id":"690295af9feed1676b9c407f","username":"DCmax1k","usernameDecoration":{"prefix":"LOCAL","prefixColor":"#ffe224"},"profileImg":{"url":"https://res.cloudinary.com/dlqj2rrlv/image/upload/v1741646278/profileImages/v2gdzso0hlhlpqpmcc48.jpg","public_id":""},"premium":true,"pastWorkoutsLength":10,"userId":"690295af9feed1676b9c407f"}}}],"dbId":"690eaddde44f134e30e11257","username":"test","name":"","email":"test@gmail.com","rank":"admin","premium":true,"friendRequests":[],"friendsAdded":[],"friends":[{"_id":"690295af9feed1676b9c407f","username":"DCmax1k","usernameDecoration":{"prefix":"LOCAL","prefixColor":"#ffe224"},"profileImg":{"url":"https://res.cloudinary.com/dlqj2rrlv/image/upload/v1741646278/profileImages/v2gdzso0hlhlpqpmcc48.jpg","public_id":""},"premium":true,"pastWorkoutsLength":10}],"subscriptions":[],"profileImg":{"url":"https://res.cloudinary.com/dxpmmy0ig/image/upload/v1765248986/profileImages/tpumbvjyhxxfhbnsn8jk.jpg","public_id":"profileImages/tpumbvjyhxxfhbnsn8jk"},"trouble":{"bans":[],"frozen":false},"googleId":"","appleId":"","facebookId":"","usernameDecoration":{"prefix":"","prefixColor":"#000000","description":"Or description here"},"extraDetails":{"ai":{"image":{"used":32,"lastReset":1766431871199,"credits":10},"foodText":{"credits":30,"lastReset":1766431871199,"used":null}}},"premiumSubscription":{"service":"stripe","stripe":{"customerId":"cus_TeXtvbvv5IldiQ","subscriptionId":"sub_1ShEnNGf9fWISIA5L1C9zoFB"}}}`))
            //return;

            const authResponse = await sendData('/auth', {});
            if (authResponse.status !== "success") {
                console.log("Error: ", authResponse.message);
                navigate('/login');
                return;
            }
            const {userInfo, fullLocalUser} = authResponse;
            console.log(JSON.stringify(userInfo));
            setInfo(userInfo);
        }
        checkAuth();
    }, [])

    const logout = async () => {
        await sendData('/login/logout', {});
        navigate('/login');
    }

    console.log(info);

  return info ? (
    <div className='Dashboard'>
        <div style={{display: "flex", justifyContent: "space-between"}}>
             <div className='username'>
                <img src={info.profileImg.url} />
                <h3 style={{color: info.premium ? "#94A7F3" : "white"}}>{info.username}</h3>
            </div>
            <div className='logout' onClick={logout}>
                Log out
            </div>
        </div>

        <StripeDisplay info={info} />




        
    </div>
  ) : (
    <div>Loading...</div>
  )
}
